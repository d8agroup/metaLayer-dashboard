{% extends 'web/themanager/base.html' %}


{% block page_title %}Map Application{% endblock %}

{% block body_class %}application{% endblock %}

{% block js %}
<script type="text/javascript" src="{{ STATIC_URL }}js/lib/jquery.ui.min.js"></script>
<script src="{{ STATIC_URL }}js/thedashboard/apps.js" type="text/javascript"></script>
{% endblock %}

{% block css %}
	<link rel="stylesheet" href="{{ STATIC_URL }}themes/companies/basic/style.css" />
    <link rel="stylesheet" href="/static/css/lib/jquery-ui-vader.css"/>
{% endblock %}

{% block start_body %}
<div class="panel-container">
	<div class="panel">
		<form name="search" action="" method="POST">
			Search: <input type="text" name="query" value="{{query}}" {% ifequal source 'feed' %}disabled="true"{% endifequal %}></input> <br />
			<br />
			Source Type: <br />
			<br />
			<input type="radio" name="source" value="twittersearch"
				{% ifequal source 'twittersearch' %}checked="checked"{% endifequal %} /> Twitter <br />
			<input type="radio" name="source" value="feed"
			 	{% ifequal source 'feed' %}checked="checked"{% endifequal %} onclick="open_feed_modal()" /> Feed <br />
			<input type="radio" name="source" value="googlenewssearch" 
				{% ifequal source 'googlenewssearch' %}checked="checked"{% endifequal %} /> Google News <br />
			<br />
			<!--
			Start Time: <br />
			<input type="text" name="start-time"></input> <br />
			<br />
			End Time: <br />
			<input type="text" name="end-time"></input> <br />
			<br />
			-->
			Location: <br />
			<select name="location">
				<option value="World" {% ifequal location 'World' %}selected="selected"{% endifequal %}>World</option>
				<option value="North America" {% ifequal location 'North America' %}selected="selected"{% endifequal %}>North America</option>
				<option value="Europe" {% ifequal location 'Europe' %}selected="selected"{% endifequal %}>Europe</option>
				<option value="Asia" {% ifequal location 'Asia' %}selected="selected"{% endifequal %}>Asia</option>
				<option value="Africa" {% ifequal location 'Africa' %}selected="selected"{% endifequal %}>Africa</option>
				<option value="Americas" {% ifequal location 'Americas' %}selected="selected"{% endifequal %}>Americas</option>
				<option value="Oceania" {% ifequal location 'Oceania' %}selected="selected"{% endifequal %}>Oceania</option>
			</select>
			<br />
			<br />
			{% csrf_token %}
			<input type="hidden" name="name" value="googlegeochart"></input>
			
			<!-- Contains feed URLs populated from feed dialog -->
			<div id="feed-data-placeholder">
				{% for entry in feed %}
					<input type="hidden" name="feed" value="{{entry}}" />
				{% endfor %}
			</div>
			
			<button>Go</button>
		</form>
	</div>
	<div class="tab-container">
		<div class="tab">&nbsp;</div>
	</div>
</div>
{% endblock %}

{% block page %}
<div id="page" style="padding-top:45px;">
	<div class="inner">

    <div class="page_section">
        <div class="page_section_inner">
            <div class="clearfix fill_width">
				<div>
					<div id="v_test" style="height:450px;">
						{% if not map_script %}
						<div style="display:table-cell;vertical-align:middle;height:450px;">
							<h3 style="text-align:center;width:860px;">To begin, click the tab on the left.</h3>
						</div>
						{% endif %}
					</div>
				</div>
				<div style="clear:both;"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block end_body %}

<div id="feed_dialog" class="modal" title="Feed Dialog" style="display:none;">
	<p>
		Enter the URLs of up to ten RSS or ATOM feeds below.
	</p>
	<form id="feed_configuration">
		<ol>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.0 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.1 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.2 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.3 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.4 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.5 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.6 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.7 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.8 }}{% endif %}" /></li>
			<li><input type="text" name="feed" value="{% if feed %}{{ feed.9 }}{% endif %}" /></li>
		</ol>

		<button onclick="close_feed_modal();return false;">Save</button>
	</form>
</div>

{% if map_script %}
<script type="text/javascript">
	{% autoescape off %}
	{{map_script}}
	{% endautoescape %}
</script>
{% endif %}
{% endblock %}

